"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.createCursor = createCursor;
exports.parseCursor = parseCursor;

var _crypto = _interopRequireDefault(require("crypto"));

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

const secret = process.env.SECRET || 'SEfjsvoSDFnvblaE';

function createCursor(obj) {
  const str = JSON.stringify(obj);

  const cipher = _crypto.default.createCipher('aes192', secret);

  let encrypted = cipher.update(str, 'utf8', 'hex');
  encrypted += cipher.final('hex');
  return encodeURI(encrypted);
}

function parseCursor(str) {
  try {
    const decipher = _crypto.default.createDecipher('aes192', secret);

    let decrypted = decipher.update(decodeURI(str), 'hex', 'utf8');
    decrypted += decipher.final('utf8');
    return JSON.parse(decrypted);
  } catch (e) {
    throw new Error('Error parsing cursor');
  }
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy9jdXJzb3IuanMiXSwibmFtZXMiOlsic2VjcmV0IiwicHJvY2VzcyIsImVudiIsIlNFQ1JFVCIsImNyZWF0ZUN1cnNvciIsIm9iaiIsInN0ciIsIkpTT04iLCJzdHJpbmdpZnkiLCJjaXBoZXIiLCJDcnlwdG8iLCJjcmVhdGVDaXBoZXIiLCJlbmNyeXB0ZWQiLCJ1cGRhdGUiLCJmaW5hbCIsImVuY29kZVVSSSIsInBhcnNlQ3Vyc29yIiwiZGVjaXBoZXIiLCJjcmVhdGVEZWNpcGhlciIsImRlY3J5cHRlZCIsImRlY29kZVVSSSIsInBhcnNlIiwiZSIsIkVycm9yIl0sIm1hcHBpbmdzIjoiOzs7Ozs7OztBQUFBOzs7O0FBRUEsTUFBTUEsTUFBTSxHQUFHQyxPQUFPLENBQUNDLEdBQVIsQ0FBWUMsTUFBWixJQUFzQixrQkFBckM7O0FBRUEsU0FBU0MsWUFBVCxDQUFzQkMsR0FBdEIsRUFBMkI7QUFDekIsUUFBTUMsR0FBRyxHQUFHQyxJQUFJLENBQUNDLFNBQUwsQ0FBZUgsR0FBZixDQUFaOztBQUNBLFFBQU1JLE1BQU0sR0FBR0MsZ0JBQU9DLFlBQVAsQ0FBb0IsUUFBcEIsRUFBOEJYLE1BQTlCLENBQWY7O0FBQ0EsTUFBSVksU0FBUyxHQUFHSCxNQUFNLENBQUNJLE1BQVAsQ0FBY1AsR0FBZCxFQUFtQixNQUFuQixFQUEyQixLQUEzQixDQUFoQjtBQUNBTSxFQUFBQSxTQUFTLElBQUlILE1BQU0sQ0FBQ0ssS0FBUCxDQUFhLEtBQWIsQ0FBYjtBQUVBLFNBQU9DLFNBQVMsQ0FBQ0gsU0FBRCxDQUFoQjtBQUNEOztBQUVELFNBQVNJLFdBQVQsQ0FBcUJWLEdBQXJCLEVBQTBCO0FBQ3hCLE1BQUk7QUFDRixVQUFNVyxRQUFRLEdBQUdQLGdCQUFPUSxjQUFQLENBQXNCLFFBQXRCLEVBQWdDbEIsTUFBaEMsQ0FBakI7O0FBRUEsUUFBSW1CLFNBQVMsR0FBR0YsUUFBUSxDQUFDSixNQUFULENBQWdCTyxTQUFTLENBQUNkLEdBQUQsQ0FBekIsRUFBZ0MsS0FBaEMsRUFBdUMsTUFBdkMsQ0FBaEI7QUFDQWEsSUFBQUEsU0FBUyxJQUFJRixRQUFRLENBQUNILEtBQVQsQ0FBZSxNQUFmLENBQWI7QUFFQSxXQUFPUCxJQUFJLENBQUNjLEtBQUwsQ0FBV0YsU0FBWCxDQUFQO0FBQ0QsR0FQRCxDQU9FLE9BQU9HLENBQVAsRUFBVTtBQUNWLFVBQU0sSUFBSUMsS0FBSixDQUFVLHNCQUFWLENBQU47QUFDRDtBQUNGIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IENyeXB0byBmcm9tICdjcnlwdG8nO1xuXG5jb25zdCBzZWNyZXQgPSBwcm9jZXNzLmVudi5TRUNSRVQgfHwgJ1NFZmpzdm9TREZudmJsYUUnO1xuXG5mdW5jdGlvbiBjcmVhdGVDdXJzb3Iob2JqKSB7XG4gIGNvbnN0IHN0ciA9IEpTT04uc3RyaW5naWZ5KG9iaik7XG4gIGNvbnN0IGNpcGhlciA9IENyeXB0by5jcmVhdGVDaXBoZXIoJ2FlczE5MicsIHNlY3JldCk7XG4gIGxldCBlbmNyeXB0ZWQgPSBjaXBoZXIudXBkYXRlKHN0ciwgJ3V0ZjgnLCAnaGV4Jyk7XG4gIGVuY3J5cHRlZCArPSBjaXBoZXIuZmluYWwoJ2hleCcpO1xuXG4gIHJldHVybiBlbmNvZGVVUkkoZW5jcnlwdGVkKTtcbn1cblxuZnVuY3Rpb24gcGFyc2VDdXJzb3Ioc3RyKSB7XG4gIHRyeSB7XG4gICAgY29uc3QgZGVjaXBoZXIgPSBDcnlwdG8uY3JlYXRlRGVjaXBoZXIoJ2FlczE5MicsIHNlY3JldCk7XG5cbiAgICBsZXQgZGVjcnlwdGVkID0gZGVjaXBoZXIudXBkYXRlKGRlY29kZVVSSShzdHIpLCAnaGV4JywgJ3V0ZjgnKTtcbiAgICBkZWNyeXB0ZWQgKz0gZGVjaXBoZXIuZmluYWwoJ3V0ZjgnKTtcblxuICAgIHJldHVybiBKU09OLnBhcnNlKGRlY3J5cHRlZCk7XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ0Vycm9yIHBhcnNpbmcgY3Vyc29yJyk7XG4gIH1cbn1cblxuZXhwb3J0IHsgY3JlYXRlQ3Vyc29yLCBwYXJzZUN1cnNvciB9O1xuIl19