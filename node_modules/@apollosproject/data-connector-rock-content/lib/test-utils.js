"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.buildGetMock = void 0;

/* eslint-disable import/prefer-default-export */
const buildGetMock = (response, dataSource) => {
  const get = jest.fn();

  if (Array.isArray(response) && Array.isArray(response[0])) {
    response.forEach(responseVal => {
      get.mockReturnValueOnce(new Promise(resolve => resolve(dataSource.normalize(responseVal))));
    });
  }

  get.mockReturnValue(new Promise(resolve => resolve(dataSource.normalize(response))));
  return get;
};

exports.buildGetMock = buildGetMock;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy90ZXN0LXV0aWxzLmpzIl0sIm5hbWVzIjpbImJ1aWxkR2V0TW9jayIsInJlc3BvbnNlIiwiZGF0YVNvdXJjZSIsImdldCIsImplc3QiLCJmbiIsIkFycmF5IiwiaXNBcnJheSIsImZvckVhY2giLCJyZXNwb25zZVZhbCIsIm1vY2tSZXR1cm5WYWx1ZU9uY2UiLCJQcm9taXNlIiwicmVzb2x2ZSIsIm5vcm1hbGl6ZSIsIm1vY2tSZXR1cm5WYWx1ZSJdLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFBO0FBQ08sTUFBTUEsWUFBWSxHQUFHLENBQUNDLFFBQUQsRUFBV0MsVUFBWCxLQUEwQjtBQUNwRCxRQUFNQyxHQUFHLEdBQUdDLElBQUksQ0FBQ0MsRUFBTCxFQUFaOztBQUNBLE1BQUlDLEtBQUssQ0FBQ0MsT0FBTixDQUFjTixRQUFkLEtBQTJCSyxLQUFLLENBQUNDLE9BQU4sQ0FBY04sUUFBUSxDQUFDLENBQUQsQ0FBdEIsQ0FBL0IsRUFBMkQ7QUFDekRBLElBQUFBLFFBQVEsQ0FBQ08sT0FBVCxDQUFrQkMsV0FBRCxJQUFpQjtBQUNoQ04sTUFBQUEsR0FBRyxDQUFDTyxtQkFBSixDQUNFLElBQUlDLE9BQUosQ0FBYUMsT0FBRCxJQUFhQSxPQUFPLENBQUNWLFVBQVUsQ0FBQ1csU0FBWCxDQUFxQkosV0FBckIsQ0FBRCxDQUFoQyxDQURGO0FBR0QsS0FKRDtBQUtEOztBQUNETixFQUFBQSxHQUFHLENBQUNXLGVBQUosQ0FDRSxJQUFJSCxPQUFKLENBQWFDLE9BQUQsSUFBYUEsT0FBTyxDQUFDVixVQUFVLENBQUNXLFNBQVgsQ0FBcUJaLFFBQXJCLENBQUQsQ0FBaEMsQ0FERjtBQUdBLFNBQU9FLEdBQVA7QUFDRCxDQWJNIiwic291cmNlc0NvbnRlbnQiOlsiLyogZXNsaW50LWRpc2FibGUgaW1wb3J0L3ByZWZlci1kZWZhdWx0LWV4cG9ydCAqL1xuZXhwb3J0IGNvbnN0IGJ1aWxkR2V0TW9jayA9IChyZXNwb25zZSwgZGF0YVNvdXJjZSkgPT4ge1xuICBjb25zdCBnZXQgPSBqZXN0LmZuKCk7XG4gIGlmIChBcnJheS5pc0FycmF5KHJlc3BvbnNlKSAmJiBBcnJheS5pc0FycmF5KHJlc3BvbnNlWzBdKSkge1xuICAgIHJlc3BvbnNlLmZvckVhY2goKHJlc3BvbnNlVmFsKSA9PiB7XG4gICAgICBnZXQubW9ja1JldHVyblZhbHVlT25jZShcbiAgICAgICAgbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHJlc29sdmUoZGF0YVNvdXJjZS5ub3JtYWxpemUocmVzcG9uc2VWYWwpKSlcbiAgICAgICk7XG4gICAgfSk7XG4gIH1cbiAgZ2V0Lm1vY2tSZXR1cm5WYWx1ZShcbiAgICBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4gcmVzb2x2ZShkYXRhU291cmNlLm5vcm1hbGl6ZShyZXNwb25zZSkpKVxuICApO1xuICByZXR1cm4gZ2V0O1xufTtcbiJdfQ==