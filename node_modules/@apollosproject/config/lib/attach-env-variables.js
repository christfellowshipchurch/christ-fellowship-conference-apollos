"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;
const envVariableRegex = /\${(.*?)}/g;

function deepObjectMap(object) {
  const newObject = {};
  Object.keys(object).forEach(key => {
    const value = object[key]; // eslint-disable-next-line no-use-before-define

    newObject[key] = handleValue(value);
  });
  return newObject;
}

function handleValue(value) {
  if (typeof value === 'string' && envVariableRegex.test(value)) {
    return value.replace(envVariableRegex, (match, p1) => process.env[p1]);
  }

  if (Array.isArray(value)) {
    return value.map(handleValue);
  }

  if (value != null && typeof value === 'object') {
    return deepObjectMap(value);
  }

  return value;
}

var _default = deepObjectMap;
exports.default = _default;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy9hdHRhY2gtZW52LXZhcmlhYmxlcy5qcyJdLCJuYW1lcyI6WyJlbnZWYXJpYWJsZVJlZ2V4IiwiZGVlcE9iamVjdE1hcCIsIm9iamVjdCIsIm5ld09iamVjdCIsIk9iamVjdCIsImtleXMiLCJmb3JFYWNoIiwia2V5IiwidmFsdWUiLCJoYW5kbGVWYWx1ZSIsInRlc3QiLCJyZXBsYWNlIiwibWF0Y2giLCJwMSIsInByb2Nlc3MiLCJlbnYiLCJBcnJheSIsImlzQXJyYXkiLCJtYXAiXSwibWFwcGluZ3MiOiI7Ozs7OztBQUFBLE1BQU1BLGdCQUFnQixHQUFHLFlBQXpCOztBQUVBLFNBQVNDLGFBQVQsQ0FBdUJDLE1BQXZCLEVBQStCO0FBQzdCLFFBQU1DLFNBQVMsR0FBRyxFQUFsQjtBQUNBQyxFQUFBQSxNQUFNLENBQUNDLElBQVAsQ0FBWUgsTUFBWixFQUFvQkksT0FBcEIsQ0FBNkJDLEdBQUQsSUFBUztBQUNuQyxVQUFNQyxLQUFLLEdBQUdOLE1BQU0sQ0FBQ0ssR0FBRCxDQUFwQixDQURtQyxDQUVuQzs7QUFDQUosSUFBQUEsU0FBUyxDQUFDSSxHQUFELENBQVQsR0FBaUJFLFdBQVcsQ0FBQ0QsS0FBRCxDQUE1QjtBQUNELEdBSkQ7QUFLQSxTQUFPTCxTQUFQO0FBQ0Q7O0FBRUQsU0FBU00sV0FBVCxDQUFxQkQsS0FBckIsRUFBNEI7QUFDMUIsTUFBSSxPQUFPQSxLQUFQLEtBQWlCLFFBQWpCLElBQTZCUixnQkFBZ0IsQ0FBQ1UsSUFBakIsQ0FBc0JGLEtBQXRCLENBQWpDLEVBQStEO0FBQzdELFdBQU9BLEtBQUssQ0FBQ0csT0FBTixDQUFjWCxnQkFBZCxFQUFnQyxDQUFDWSxLQUFELEVBQVFDLEVBQVIsS0FBZUMsT0FBTyxDQUFDQyxHQUFSLENBQVlGLEVBQVosQ0FBL0MsQ0FBUDtBQUNEOztBQUNELE1BQUlHLEtBQUssQ0FBQ0MsT0FBTixDQUFjVCxLQUFkLENBQUosRUFBMEI7QUFDeEIsV0FBT0EsS0FBSyxDQUFDVSxHQUFOLENBQVVULFdBQVYsQ0FBUDtBQUNEOztBQUNELE1BQUlELEtBQUssSUFBSSxJQUFULElBQWlCLE9BQU9BLEtBQVAsS0FBaUIsUUFBdEMsRUFBZ0Q7QUFDOUMsV0FBT1AsYUFBYSxDQUFDTyxLQUFELENBQXBCO0FBQ0Q7O0FBQ0QsU0FBT0EsS0FBUDtBQUNEOztlQUVjUCxhIiwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgZW52VmFyaWFibGVSZWdleCA9IC9cXCR7KC4qPyl9L2c7XG5cbmZ1bmN0aW9uIGRlZXBPYmplY3RNYXAob2JqZWN0KSB7XG4gIGNvbnN0IG5ld09iamVjdCA9IHt9O1xuICBPYmplY3Qua2V5cyhvYmplY3QpLmZvckVhY2goKGtleSkgPT4ge1xuICAgIGNvbnN0IHZhbHVlID0gb2JqZWN0W2tleV07XG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXVzZS1iZWZvcmUtZGVmaW5lXG4gICAgbmV3T2JqZWN0W2tleV0gPSBoYW5kbGVWYWx1ZSh2YWx1ZSk7XG4gIH0pO1xuICByZXR1cm4gbmV3T2JqZWN0O1xufVxuXG5mdW5jdGlvbiBoYW5kbGVWYWx1ZSh2YWx1ZSkge1xuICBpZiAodHlwZW9mIHZhbHVlID09PSAnc3RyaW5nJyAmJiBlbnZWYXJpYWJsZVJlZ2V4LnRlc3QodmFsdWUpKSB7XG4gICAgcmV0dXJuIHZhbHVlLnJlcGxhY2UoZW52VmFyaWFibGVSZWdleCwgKG1hdGNoLCBwMSkgPT4gcHJvY2Vzcy5lbnZbcDFdKTtcbiAgfVxuICBpZiAoQXJyYXkuaXNBcnJheSh2YWx1ZSkpIHtcbiAgICByZXR1cm4gdmFsdWUubWFwKGhhbmRsZVZhbHVlKTtcbiAgfVxuICBpZiAodmFsdWUgIT0gbnVsbCAmJiB0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnKSB7XG4gICAgcmV0dXJuIGRlZXBPYmplY3RNYXAodmFsdWUpO1xuICB9XG4gIHJldHVybiB2YWx1ZTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgZGVlcE9iamVjdE1hcDtcbiJdfQ==