"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
Object.defineProperty(exports, "schema", {
  enumerable: true,
  get: function () {
    return _dataSchema.mediaSchema;
  }
});
exports.resolver = void 0;

var _dataSchema = require("@apollosproject/data-schema");

const addTypenameToSources = __typename => ({
  sources
}) => sources.map(s => ({
  __typename,
  ...s
}));

const resolver = {
  Media: {
    // Implementors must attach __typename to root.
    __resolveType: ({
      __typename
    }) => __typename
  },
  MediaSource: {
    // Implementors must attach __typename to root.
    __resolveType: ({
      __typename
    }) => __typename
  },
  ImageMedia: {
    sources: addTypenameToSources('ImageMediaSource')
  },
  AudioMedia: {
    sources: addTypenameToSources('AudioMediaSource')
  },
  VideoMedia: {
    sources: addTypenameToSources('VideoMediaSource')
  },
  ImageMediaSource: {
    uri: ({
      uri = ''
    }) => {
      if (!uri || typeof uri !== 'string') return null;
      if (uri.startsWith('//')) return `https:${uri}`;
      return uri;
    }
  }
};
exports.resolver = resolver;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9tZWRpYS9pbmRleC5qcyJdLCJuYW1lcyI6WyJhZGRUeXBlbmFtZVRvU291cmNlcyIsIl9fdHlwZW5hbWUiLCJzb3VyY2VzIiwibWFwIiwicyIsInJlc29sdmVyIiwiTWVkaWEiLCJfX3Jlc29sdmVUeXBlIiwiTWVkaWFTb3VyY2UiLCJJbWFnZU1lZGlhIiwiQXVkaW9NZWRpYSIsIlZpZGVvTWVkaWEiLCJJbWFnZU1lZGlhU291cmNlIiwidXJpIiwic3RhcnRzV2l0aCJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7OztBQUFBOztBQUVBLE1BQU1BLG9CQUFvQixHQUFJQyxVQUFELElBQWdCLENBQUM7QUFBRUMsRUFBQUE7QUFBRixDQUFELEtBQzNDQSxPQUFPLENBQUNDLEdBQVIsQ0FBYUMsQ0FBRCxLQUFRO0FBQUVILEVBQUFBLFVBQUY7QUFBYyxLQUFHRztBQUFqQixDQUFSLENBQVosQ0FERjs7QUFHTyxNQUFNQyxRQUFRLEdBQUc7QUFDdEJDLEVBQUFBLEtBQUssRUFBRTtBQUNMO0FBQ0FDLElBQUFBLGFBQWEsRUFBRSxDQUFDO0FBQUVOLE1BQUFBO0FBQUYsS0FBRCxLQUFvQkE7QUFGOUIsR0FEZTtBQUt0Qk8sRUFBQUEsV0FBVyxFQUFFO0FBQ1g7QUFDQUQsSUFBQUEsYUFBYSxFQUFFLENBQUM7QUFBRU4sTUFBQUE7QUFBRixLQUFELEtBQW9CQTtBQUZ4QixHQUxTO0FBU3RCUSxFQUFBQSxVQUFVLEVBQUU7QUFDVlAsSUFBQUEsT0FBTyxFQUFFRixvQkFBb0IsQ0FBQyxrQkFBRDtBQURuQixHQVRVO0FBWXRCVSxFQUFBQSxVQUFVLEVBQUU7QUFDVlIsSUFBQUEsT0FBTyxFQUFFRixvQkFBb0IsQ0FBQyxrQkFBRDtBQURuQixHQVpVO0FBZXRCVyxFQUFBQSxVQUFVLEVBQUU7QUFDVlQsSUFBQUEsT0FBTyxFQUFFRixvQkFBb0IsQ0FBQyxrQkFBRDtBQURuQixHQWZVO0FBa0J0QlksRUFBQUEsZ0JBQWdCLEVBQUU7QUFDaEJDLElBQUFBLEdBQUcsRUFBRSxDQUFDO0FBQUVBLE1BQUFBLEdBQUcsR0FBRztBQUFSLEtBQUQsS0FBa0I7QUFDckIsVUFBSSxDQUFDQSxHQUFELElBQVEsT0FBT0EsR0FBUCxLQUFlLFFBQTNCLEVBQXFDLE9BQU8sSUFBUDtBQUNyQyxVQUFJQSxHQUFHLENBQUNDLFVBQUosQ0FBZSxJQUFmLENBQUosRUFBMEIsT0FBUSxTQUFRRCxHQUFJLEVBQXBCO0FBQzFCLGFBQU9BLEdBQVA7QUFDRDtBQUxlO0FBbEJJLENBQWpCIiwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IHsgbWVkaWFTY2hlbWEgYXMgc2NoZW1hIH0gZnJvbSAnQGFwb2xsb3Nwcm9qZWN0L2RhdGEtc2NoZW1hJztcblxuY29uc3QgYWRkVHlwZW5hbWVUb1NvdXJjZXMgPSAoX190eXBlbmFtZSkgPT4gKHsgc291cmNlcyB9KSA9PlxuICBzb3VyY2VzLm1hcCgocykgPT4gKHsgX190eXBlbmFtZSwgLi4ucyB9KSk7XG5cbmV4cG9ydCBjb25zdCByZXNvbHZlciA9IHtcbiAgTWVkaWE6IHtcbiAgICAvLyBJbXBsZW1lbnRvcnMgbXVzdCBhdHRhY2ggX190eXBlbmFtZSB0byByb290LlxuICAgIF9fcmVzb2x2ZVR5cGU6ICh7IF9fdHlwZW5hbWUgfSkgPT4gX190eXBlbmFtZSxcbiAgfSxcbiAgTWVkaWFTb3VyY2U6IHtcbiAgICAvLyBJbXBsZW1lbnRvcnMgbXVzdCBhdHRhY2ggX190eXBlbmFtZSB0byByb290LlxuICAgIF9fcmVzb2x2ZVR5cGU6ICh7IF9fdHlwZW5hbWUgfSkgPT4gX190eXBlbmFtZSxcbiAgfSxcbiAgSW1hZ2VNZWRpYToge1xuICAgIHNvdXJjZXM6IGFkZFR5cGVuYW1lVG9Tb3VyY2VzKCdJbWFnZU1lZGlhU291cmNlJyksXG4gIH0sXG4gIEF1ZGlvTWVkaWE6IHtcbiAgICBzb3VyY2VzOiBhZGRUeXBlbmFtZVRvU291cmNlcygnQXVkaW9NZWRpYVNvdXJjZScpLFxuICB9LFxuICBWaWRlb01lZGlhOiB7XG4gICAgc291cmNlczogYWRkVHlwZW5hbWVUb1NvdXJjZXMoJ1ZpZGVvTWVkaWFTb3VyY2UnKSxcbiAgfSxcbiAgSW1hZ2VNZWRpYVNvdXJjZToge1xuICAgIHVyaTogKHsgdXJpID0gJycgfSkgPT4ge1xuICAgICAgaWYgKCF1cmkgfHwgdHlwZW9mIHVyaSAhPT0gJ3N0cmluZycpIHJldHVybiBudWxsO1xuICAgICAgaWYgKHVyaS5zdGFydHNXaXRoKCcvLycpKSByZXR1cm4gYGh0dHBzOiR7dXJpfWA7XG4gICAgICByZXR1cm4gdXJpO1xuICAgIH0sXG4gIH0sXG59O1xuIl19