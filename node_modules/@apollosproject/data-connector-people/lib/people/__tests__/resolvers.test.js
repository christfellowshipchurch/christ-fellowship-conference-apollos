"use strict";

var _graphql = require("graphql");

var _apolloServerEnv = require("apollo-server-env");

var _config = _interopRequireDefault(require("@apollosproject/config"));

var _serverCore = require("@apollosproject/server-core");

var _testUtils = require("@apollosproject/server-core/lib/testUtils");

var _dataConnectorRockAuth = require("@apollosproject/data-connector-rock-auth");

var _dataSchema = require("@apollosproject/data-schema");

var Person = _interopRequireWildcard(require("../index"));

var _authMock = _interopRequireDefault(require("../../authMock"));

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) { var desc = Object.defineProperty && Object.getOwnPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : {}; if (desc.get || desc.set) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } } newObj.default = obj; return newObj; } }

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

// we import the root-level schema and resolver so we test the entire integration:
const Auth = {
  schema: _dataSchema.authSchema,
  dataSource: _authMock.default
};
const {
  getContext,
  getSchema
} = (0, _testUtils.createTestHelpers)({
  Person,
  Auth
});

_config.default.loadJs({
  ROCK: {
    API_URL: 'https://apollosrock.newspring.cc/api',
    API_TOKEN: 'some-rock-token',
    IMAGE_URL: 'https://apollosrock.newspring.cc/GetImage.ashx'
  }
});

describe('Person', () => {
  let schema;
  let context;
  beforeEach(() => {
    _apolloServerEnv.fetch.resetMocks();

    _apolloServerEnv.fetch.mockRockDataSourceAPI();

    schema = getSchema([_dataSchema.peopleSchema, _dataSchema.mediaSchema]);
    context = getContext();
  });
  it("updates a user's attributes, if there is a current user", async () => {
    const query = `
      mutation {
        updateProfileField(input: { field: FirstName, value: "Richard" }) {
          firstName
          id
        }
      }
    `;
    const {
      userToken,
      rockCookie
    } = (0, _dataConnectorRockAuth.registerToken)((0, _dataConnectorRockAuth.generateToken)({
      cookie: 'some-cookie'
    }));
    context.userToken = userToken;
    context.rockCookie = rockCookie;
    const rootValue = {};
    const result = await (0, _graphql.graphql)(schema, query, rootValue, context);
    expect(result).toMatchSnapshot();
  });
  it('updates multiple fields', async () => {
    const query = `
      mutation {
        updateProfileFields(input: [
          { field: FirstName, value: "Richard" },
          { field: LastName, value: "Walkerton" }
        ]) {
          firstName
          lastName
          id
        }
      }
    `;
    const {
      userToken,
      rockCookie
    } = (0, _dataConnectorRockAuth.registerToken)((0, _dataConnectorRockAuth.generateToken)({
      cookie: 'some-cookie'
    }));
    context.userToken = userToken;
    context.rockCookie = rockCookie;
    const rootValue = {};
    const result = await (0, _graphql.graphql)(schema, query, rootValue, context);
    expect(result).toMatchSnapshot();
  });
  it("fails to update a user's attributes, without a current user", async () => {
    const query = `
      mutation {
        updateProfileField(input: { field: FirstName, value: "Richard" }) {
          firstName
          id
        }
      }
    `;
    const rootValue = {};
    const result = await (0, _graphql.graphql)(schema, query, rootValue, context);
    expect(result).toMatchSnapshot();
  });
  it('gets people by an email', async () => {
    const query = `
      query {
        people(email: "isaac.hardy@newspring.cc") {
          id
          firstName
          lastName
          nickName
          email
          photo {
            uri
          }
        }
      }
    `;
    const rootValue = {};
    const result = await (0, _graphql.graphql)(schema, query, rootValue, context);
    expect(result).toMatchSnapshot();
  });
  it('gets a single person when querying by root node', async () => {
    const query = `
      query {
        node(
          id: "${(0, _serverCore.createGlobalId)(51, 'Person')}"
        ) {
          ... on Person {
            id
            firstName
            lastName
            nickName
            email
            photo {
              uri
            }
          }
        }
      }
    `;
    const rootValue = {};
    const result = await (0, _graphql.graphql)(schema, query, rootValue, context);
    expect(result).toMatchSnapshot();
  });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NyYy9wZW9wbGUvX190ZXN0c19fL3Jlc29sdmVycy50ZXN0LmpzIl0sIm5hbWVzIjpbIkF1dGgiLCJzY2hlbWEiLCJhdXRoU2NoZW1hIiwiZGF0YVNvdXJjZSIsImF1dGhNb2NrIiwiZ2V0Q29udGV4dCIsImdldFNjaGVtYSIsIlBlcnNvbiIsIkFwb2xsb3NDb25maWciLCJsb2FkSnMiLCJST0NLIiwiQVBJX1VSTCIsIkFQSV9UT0tFTiIsIklNQUdFX1VSTCIsImRlc2NyaWJlIiwiY29udGV4dCIsImJlZm9yZUVhY2giLCJmZXRjaCIsInJlc2V0TW9ja3MiLCJtb2NrUm9ja0RhdGFTb3VyY2VBUEkiLCJwZW9wbGVTY2hlbWEiLCJtZWRpYVNjaGVtYSIsIml0IiwicXVlcnkiLCJ1c2VyVG9rZW4iLCJyb2NrQ29va2llIiwiY29va2llIiwicm9vdFZhbHVlIiwicmVzdWx0IiwiZXhwZWN0IiwidG9NYXRjaFNuYXBzaG90Il0sIm1hcHBpbmdzIjoiOztBQUFBOztBQUNBOztBQUNBOztBQUNBOztBQUNBOztBQUNBOztBQUlBOztBQU1BOztBQUNBOzs7Ozs7QUFGQTtBQUlBLE1BQU1BLElBQUksR0FBRztBQUFFQyxFQUFBQSxNQUFNLEVBQUVDLHNCQUFWO0FBQXNCQyxFQUFBQSxVQUFVLEVBQUVDO0FBQWxDLENBQWI7QUFDQSxNQUFNO0FBQUVDLEVBQUFBLFVBQUY7QUFBY0MsRUFBQUE7QUFBZCxJQUE0QixrQ0FBa0I7QUFBRUMsRUFBQUEsTUFBRjtBQUFVUCxFQUFBQTtBQUFWLENBQWxCLENBQWxDOztBQUVBUSxnQkFBY0MsTUFBZCxDQUFxQjtBQUNuQkMsRUFBQUEsSUFBSSxFQUFFO0FBQ0pDLElBQUFBLE9BQU8sRUFBRSxzQ0FETDtBQUVKQyxJQUFBQSxTQUFTLEVBQUUsaUJBRlA7QUFHSkMsSUFBQUEsU0FBUyxFQUFFO0FBSFA7QUFEYSxDQUFyQjs7QUFRQUMsUUFBUSxDQUFDLFFBQUQsRUFBVyxNQUFNO0FBQ3ZCLE1BQUliLE1BQUo7QUFD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SUFBQUEsTUFBTSxDQUFDRCxNQUFELENBQU4sQ0FBZUUsZUFBZjtBQUNELEdBdEJDLENBQUY7QUF1QkQsQ0E5R08sQ0FBUiIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGdyYXBocWwgfSBmcm9tICdncmFwaHFsJztcbmltcG9ydCB7IGZldGNoIH0gZnJvbSAnYXBvbGxvLXNlcnZlci1lbnYnO1xuaW1wb3J0IEFwb2xsb3NDb25maWcgZnJvbSAnQGFwb2xsb3Nwcm9qZWN0L2NvbmZpZyc7XG5pbXBvcnQgeyBjcmVhdGVHbG9iYWxJZCB9IGZyb20gJ0BhcG9sbG9zcHJvamVjdC9zZXJ2ZXItY29yZSc7XG5pbXBvcnQgeyBjcmVhdGVUZXN0SGVscGVycyB9IGZyb20gJ0BhcG9sbG9zcHJvamVjdC9zZXJ2ZXItY29yZS9saWIvdGVzdFV0aWxzJztcbmltcG9ydCB7XG4gIGdlbmVyYXRlVG9rZW4sXG4gIHJlZ2lzdGVyVG9rZW4sXG59IGZyb20gJ0BhcG9sbG9zcHJvamVjdC9kYXRhLWNvbm5lY3Rvci1yb2NrLWF1dGgnO1xuaW1wb3J0IHtcbiAgcGVvcGxlU2NoZW1hLFxuICBtZWRpYVNjaGVtYSxcbiAgYXV0aFNjaGVtYSxcbn0gZnJvbSAnQGFwb2xsb3Nwcm9qZWN0L2RhdGEtc2NoZW1hJztcbi8vIHdlIGltcG9ydCB0aGUgcm9vdC1sZXZlbCBzY2hlbWEgYW5kIHJlc29sdmVyIHNvIHdlIHRlc3QgdGhlIGVudGlyZSBpbnRlZ3JhdGlvbjpcbmltcG9ydCAqIGFzIFBlcnNvbiBmcm9tICcuLi9pbmRleCc7XG5pbXBvcnQgYXV0aE1vY2sgZnJvbSAnLi4vLi4vYXV0aE1vY2snO1xuXG5jb25zdCBBdXRoID0geyBzY2hlbWE6IGF1dGhTY2hlbWEsIGRhdGFTb3VyY2U6IGF1dGhNb2NrIH07XG5jb25zdCB7IGdldENvbnRleHQsIGdldFNjaGVtYSB9ID0gY3JlYXRlVGVzdEhlbHBlcnMoeyBQZXJzb24sIEF1dGggfSk7XG5cbkFwb2xsb3NDb25maWcubG9hZEpzKHtcbiAgUk9DSzoge1xuICAgIEFQSV9VUkw6ICdodHRwczovL2Fwb2xsb3Nyb2NrLm5ld3NwcmluZy5jYy9hcGknLFxuICAgIEFQSV9UT0tFTjogJ3NvbWUtcm9jay10b2tlbicsXG4gICAgSU1BR0VfVVJMOiAnaHR0cHM6Ly9hcG9sbG9zcm9jay5uZXdzcHJpbmcuY2MvR2V0SW1hZ2UuYXNoeCcsXG4gIH0sXG59KTtcblxuZGVzY3JpYmUoJ1BlcnNvbicsICgpID0+IHtcbiAgbGV0IHNjaGVtYTtcbiAgbGV0IGNvbnRleHQ7XG4gIGJlZm9yZUVhY2goKCkgPT4ge1xuICAgIGZldGNoLnJlc2V0TW9ja3MoKTtcbiAgICBmZXRjaC5tb2NrUm9ja0RhdGFTb3VyY2VBUEkoKTtcbiAgICBzY2hlbWEgPSBnZXRTY2hlbWEoW3Blb3BsZVNjaGVtYSwgbWVkaWFTY2hlbWFdKTtcbiAgICBjb250ZXh0ID0gZ2V0Q29udGV4dCgpO1xuICB9KTtcblxuICBpdChcInVwZGF0ZXMgYSB1c2VyJ3MgYXR0cmlidXRlcywgaWYgdGhlcmUgaXMgYSBjdXJyZW50IHVzZXJcIiwgYXN5bmMgKCkgPT4ge1xuICAgIGNvbnN0IHF1ZXJ5ID0gYFxuICAgICAgbXV0YXRpb24ge1xuICAgICAgICB1cGRhdGVQcm9maWxlRmllbGQoaW5wdXQ6IHsgZmllbGQ6IEZpcnN0TmFtZSwgdmFsdWU6IFwiUmljaGFyZFwiIH0pIHtcbiAgICAgICAgICBmaXJzdE5hbWVcbiAgICAgICAgICBpZFxuICAgICAgICB9XG4gICAgICB9XG4gICAgYDtcbiAgICBjb25zdCB7IHVzZXJUb2tlbiwgcm9ja0Nvb2tpZSB9ID0gcmVnaXN0ZXJUb2tlbihcbiAgICAgIGdlbmVyYXRlVG9rZW4oeyBjb29raWU6ICdzb21lLWNvb2tpZScgfSlcbiAgICApO1xuICAgIGNvbnRleHQudXNlclRva2VuID0gdXNlclRva2VuO1xuICAgIGNvbnRleHQucm9ja0Nvb2tpZSA9IHJvY2tDb29raWU7XG4gICAgY29uc3Qgcm9vdFZhbHVlID0ge307XG4gICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgZ3JhcGhxbChzY2hlbWEsIHF1ZXJ5LCByb290VmFsdWUsIGNvbnRleHQpO1xuICAgIGV4cGVjdChyZXN1bHQpLnRvTWF0Y2hTbmFwc2hvdCgpO1xuICB9KTtcblxuICBpdCgndXBkYXRlcyBtdWx0aXBsZSBmaWVsZHMnLCBhc3luYyAoKSA9PiB7XG4gICAgY29uc3QgcXVlcnkgPSBgXG4gICAgICBtdXRhdGlvbiB7XG4gICAgICAgIHVwZGF0ZVByb2ZpbGVGaWVsZHMoaW5wdXQ6IFtcbiAgICAgICAgICB7IGZpZWxkOiBGaXJzdE5hbWUsIHZhbHVlOiBcIlJpY2hhcmRcIiB9LFxuICAgICAgICAgIHsgZmllbGQ6IExhc3ROYW1lLCB2YWx1ZTogXCJXYWxrZXJ0b25cIiB9XG4gICAgICAgIF0pIHtcbiAgICAgICAgICBmaXJzdE5hbWVcbiAgICAgICAgICBsYXN0TmFtZVxuICAgICAgICAgIGlkXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICBgO1xuICAgIGNvbnN0IHsgdXNlclRva2VuLCByb2NrQ29va2llIH0gPSByZWdpc3RlclRva2VuKFxuICAgICAgZ2VuZXJhdGVUb2tlbih7IGNvb2tpZTogJ3NvbWUtY29va2llJyB9KVxuICAgICk7XG4gICAgY29udGV4dC51c2VyVG9rZW4gPSB1c2VyVG9rZW47XG4gICAgY29udGV4dC5yb2NrQ29va2llID0gcm9ja0Nvb2tpZTtcbiAgICBjb25zdCByb290VmFsdWUgPSB7fTtcbiAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBncmFwaHFsKHNjaGVtYSwgcXVlcnksIHJvb3RWYWx1ZSwgY29udGV4dCk7XG4gICAgZXhwZWN0KHJlc3VsdCkudG9NYXRjaFNuYXBzaG90KCk7XG4gIH0pO1xuXG4gIGl0KFwiZmFpbHMgdG8gdXBkYXRlIGEgdXNlcidzIGF0dHJpYnV0ZXMsIHdpdGhvdXQgYSBjdXJyZW50IHVzZXJcIiwgYXN5bmMgKCkgPT4ge1xuICAgIGNvbnN0IHF1ZXJ5ID0gYFxuICAgICAgbXV0YXRpb24ge1xuICAgICAgICB1cGRhdGVQcm9maWxlRmllbGQoaW5wdXQ6IHsgZmllbGQ6IEZpcnN0TmFtZSwgdmFsdWU6IFwiUmljaGFyZFwiIH0pIHtcbiAgICAgICAgICBmaXJzdE5hbWVcbiAgICAgICAgICBpZFxuICAgICAgICB9XG4gICAgICB9XG4gICAgYDtcbiAgICBjb25zdCByb290VmFsdWUgPSB7fTtcbiAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBncmFwaHFsKHNjaGVtYSwgcXVlcnksIHJvb3RWYWx1ZSwgY29udGV4dCk7XG4gICAgZXhwZWN0KHJlc3VsdCkudG9NYXRjaFNuYXBzaG90KCk7XG4gIH0pO1xuXG4gIGl0KCdnZXRzIHBlb3BsZSBieSBhbiBlbWFpbCcsIGFzeW5jICgpID0+IHtcbiAgICBjb25zdCBxdWVyeSA9IGBcbiAgICAgIHF1ZXJ5IHtcbiAgICAgICAgcGVvcGxlKGVtYWlsOiBcImlzYWFjLmhhcmR5QG5ld3NwcmluZy5jY1wiKSB7XG4gICAgICAgICAgaWRcbiAgICAgICAgICBmaXJzdE5hbWVcbiAgICAgICAgICBsYXN0TmFtZVxuICAgICAgICAgIG5pY2tOYW1lXG4gICAgICAgICAgZW1haWxcbiAgICAgICAgICBwaG90byB7XG4gICAgICAgICAgICB1cmlcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICBgO1xuICAgIGNvbnN0IHJvb3RWYWx1ZSA9IHt9O1xuXG4gICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgZ3JhcGhxbChzY2hlbWEsIHF1ZXJ5LCByb290VmFsdWUsIGNvbnRleHQpO1xuICAgIGV4cGVjdChyZXN1bHQpLnRvTWF0Y2hTbmFwc2hvdCgpO1xuICB9KTtcblxuICBpdCgnZ2V0cyBhIHNpbmdsZSBwZXJzb24gd2hlbiBxdWVyeWluZyBieSByb290IG5vZGUnLCBhc3luYyAoKSA9PiB7XG4gICAgY29uc3QgcXVlcnkgPSBgXG4gICAgICBxdWVyeSB7XG4gICAgICAgIG5vZGUoXG4gICAgICAgICAgaWQ6IFwiJHtjcmVhdGVHbG9iYWxJZCg1MSwgJ1BlcnNvbicpfVwiXG4gICAgICAgICkge1xuICAgICAgICAgIC4uLiBvbiBQZXJzb24ge1xuICAgICAgICAgICAgaWRcbiAgICAgICAgICAgIGZpcnN0TmFtZVxuICAgICAgICAgICAgbGFzdE5hbWVcbiAgICAgICAgICAgIG5pY2tOYW1lXG4gICAgICAgICAgICBlbWFpbFxuICAgICAgICAgICAgcGhvdG8ge1xuICAgICAgICAgICAgICB1cmlcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICBgO1xuICAgIGNvbnN0IHJvb3RWYWx1ZSA9IHt9O1xuICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGdyYXBocWwoc2NoZW1hLCBxdWVyeSwgcm9vdFZhbHVlLCBjb250ZXh0KTtcbiAgICBleHBlY3QocmVzdWx0KS50b01hdGNoU25hcHNob3QoKTtcbiAgfSk7XG59KTtcbiJdfQ==