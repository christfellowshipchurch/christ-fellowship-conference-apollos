"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;

var _base = _interopRequireDefault(require("./base"));

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }

class RockInteractionAnalytics extends _base.default {
  constructor(...args) {
    super(...args);

    _defineProperty(this, "eventWhitelist", ['View Content']);
  }

  track({
    event,
    userId,
    sessionId,
    properties
  }) {
    if (!userId) {
      return null;
    }

    switch (event) {
      case 'View Content':
        {
          return this.trackViewContent({
            itemId: properties.itemId,
            title: properties.title,
            sessionId
          });
        }

      default:
        console.log(`${event} not supported by RockInteraction Analytics`);
        return null;
    }
  }

  trackViewContent({
    title,
    itemId,
    sessionId
  }) {
    if (!itemId || !sessionId) {
      console.log('No itemId or sessionId included in `track` call.');
      return null;
    }

    return this.context.dataSources.Interactions.createContentItemInteraction({
      itemId,
      itemTitle: title,
      sessionId,
      operationName: 'View Content'
    });
  }

}

exports.default = RockInteractionAnalytics;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9pbnRlcmZhY2VzL3JvY2tfaW50ZXJhY3Rpb25zLmpzIl0sIm5hbWVzIjpbIlJvY2tJbnRlcmFjdGlvbkFuYWx5dGljcyIsIkJhc2VBbmFseXRpY3MiLCJ0cmFjayIsImV2ZW50IiwidXNlcklkIiwic2Vzc2lvbklkIiwicHJvcGVydGllcyIsInRyYWNrVmlld0NvbnRlbnQiLCJpdGVtSWQiLCJ0aXRsZSIsImNvbnNvbGUiLCJsb2ciLCJjb250ZXh0IiwiZGF0YVNvdXJjZXMiLCJJbnRlcmFjdGlvbnMiLCJjcmVhdGVDb250ZW50SXRlbUludGVyYWN0aW9uIiwiaXRlbVRpdGxlIiwib3BlcmF0aW9uTmFtZSJdLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFBOzs7Ozs7QUFFZSxNQUFNQSx3QkFBTixTQUF1Q0MsYUFBdkMsQ0FBcUQ7QUFBQTtBQUFBOztBQUFBLDRDQUNqRCxDQUFDLGNBQUQsQ0FEaUQ7QUFBQTs7QUFHbEVDLEVBQUFBLEtBQUssQ0FBQztBQUFFQyxJQUFBQSxLQUFGO0FBQVNDLElBQUFBLE1BQVQ7QUFBaUJDLElBQUFBLFNBQWpCO0FBQTRCQyxJQUFBQTtBQUE1QixHQUFELEVBQTJDO0FBQzlDLFFBQUksQ0FBQ0YsTUFBTCxFQUFhO0FBQ1gsYUFBTyxJQUFQO0FBQ0Q7O0FBQ0QsWUFBUUQsS0FBUjtBQUNFLFdBQUssY0FBTDtBQUFxQjtBQUNuQixpQkFBTyxLQUFLSSxnQkFBTCxDQUFzQjtBQUMzQkMsWUFBQUEsTUFBTSxFQUFFRixVQUFVLENBQUNFLE1BRFE7QUFFM0JDLFlBQUFBLEtBQUssRUFBRUgsVUFBVSxDQUFDRyxLQUZTO0FBRzNCSixZQUFBQTtBQUgyQixXQUF0QixDQUFQO0FBS0Q7O0FBQ0Q7QUFDRUssUUFBQUEsT0FBTyxDQUFDQyxHQUFSLENBQWEsR0FBRVIsS0FBTSw2Q0FBckI7QUFDQSxlQUFPLElBQVA7QUFWSjtBQVlEOztBQUVESSxFQUFBQSxnQkFBZ0IsQ0FBQztBQUFFRSxJQUFBQSxLQUFGO0FBQVNELElBQUFBLE1BQVQ7QUFBaUJILElBQUFBO0FBQWpCLEdBQUQsRUFBK0I7QUFDN0MsUUFBSSxDQUFDRyxNQUFELElBQVcsQ0FBQ0gsU0FBaEIsRUFBMkI7QUFDekJLLE1BQUFBLE9BQU8sQ0FBQ0MsR0FBUixDQUFZLGtEQUFaO0FBQ0EsYUFBTyxJQUFQO0FBQ0Q7O0FBQ0QsV0FBTyxLQUFLQyxPQUFMLENBQWFDLFdBQWIsQ0FBeUJDLFlBQXpCLENBQXNDQyw0QkFBdEMsQ0FBbUU7QUFDeEVQLE1BQUFBLE1BRHdFO0FBRXhFUSxNQUFBQSxTQUFTLEVBQUVQLEtBRjZEO0FBR3hFSixNQUFBQSxTQUh3RTtBQUl4RVksTUFBQUEsYUFBYSxFQUFFO0FBSnlELEtBQW5FLENBQVA7QUFNRDs7QUFoQ2lFIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IEJhc2VBbmFseXRpY3MgZnJvbSAnLi9iYXNlJztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUm9ja0ludGVyYWN0aW9uQW5hbHl0aWNzIGV4dGVuZHMgQmFzZUFuYWx5dGljcyB7XG4gIGV2ZW50V2hpdGVsaXN0ID0gWydWaWV3IENvbnRlbnQnXTtcblxuICB0cmFjayh7IGV2ZW50LCB1c2VySWQsIHNlc3Npb25JZCwgcHJvcGVydGllcyB9KSB7XG4gICAgaWYgKCF1c2VySWQpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICBzd2l0Y2ggKGV2ZW50KSB7XG4gICAgICBjYXNlICdWaWV3IENvbnRlbnQnOiB7XG4gICAgICAgIHJldHVybiB0aGlzLnRyYWNrVmlld0NvbnRlbnQoe1xuICAgICAgICAgIGl0ZW1JZDogcHJvcGVydGllcy5pdGVtSWQsXG4gICAgICAgICAgdGl0bGU6IHByb3BlcnRpZXMudGl0bGUsXG4gICAgICAgICAgc2Vzc2lvbklkLFxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIGNvbnNvbGUubG9nKGAke2V2ZW50fSBub3Qgc3VwcG9ydGVkIGJ5IFJvY2tJbnRlcmFjdGlvbiBBbmFseXRpY3NgKTtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICB9XG5cbiAgdHJhY2tWaWV3Q29udGVudCh7IHRpdGxlLCBpdGVtSWQsIHNlc3Npb25JZCB9KSB7XG4gICAgaWYgKCFpdGVtSWQgfHwgIXNlc3Npb25JZCkge1xuICAgICAgY29uc29sZS5sb2coJ05vIGl0ZW1JZCBvciBzZXNzaW9uSWQgaW5jbHVkZWQgaW4gYHRyYWNrYCBjYWxsLicpO1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLmNvbnRleHQuZGF0YVNvdXJjZXMuSW50ZXJhY3Rpb25zLmNyZWF0ZUNvbnRlbnRJdGVtSW50ZXJhY3Rpb24oe1xuICAgICAgaXRlbUlkLFxuICAgICAgaXRlbVRpdGxlOiB0aXRsZSxcbiAgICAgIHNlc3Npb25JZCxcbiAgICAgIG9wZXJhdGlvbk5hbWU6ICdWaWV3IENvbnRlbnQnLFxuICAgIH0pO1xuICB9XG59XG4iXX0=